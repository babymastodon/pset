{% extends 'main/base.html' %}
{% load url from future %}{% load staticfiles %}

{% block head %}
{{block.super}}
<link type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/themes/redmond/jquery-ui.css" rel="Stylesheet" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script> 
{% endblock %}

{% block main_content %}

<!--The current user is: -->
<!--<pre>-->
<!--User: {{user.username}}-->
<!--First name: {{user.first_name}}-->
<!--Last name: {{user.last_name}}-->
<!--Email: {{user.email}}-->
<!--Password: {{user.password}}-->
<!--Is staff: {{user.is_staff}}-->
<!--Is active: {{user.is_active}}-->
<!--Is superuser: {{user.is_superuser}}-->
<!--Last login: {{user.last_login}}-->
<!--Date joined: {{user.date_joined}}-->
<!---->
<!--Userinfo: {{user.user_info.facebook_id}} -->
<!--Description: {{user.user_info.description}}-->
<!--</pre>-->

<script src="{% static 'js/add_a_class.js'%}" type="text/javascript"></script>

<div class="grid_12">
    <div id = "class_feed_div">
      <h1>Your Classes</h1>
      {% for klass in classes.all %}
      {% if klass.party_set.count > 0 %} 
      <h2>{{klass.title}}</h2>
      <ul>
      {% for party in klass.party_set.all %}
      <li><a href="{% url 'main.party_views.party_details' pk=party.id %}">{{party.title}}</a>
      {% endfor %}
      {% else %}
      <h2>{{klass.title}}</h2>
      <ul>
        <li> No Parties </li>
      </ul>
      {% endif %}
      {% endfor %}
    </div>
    <div id="add_class_div">
      <form id="add_class_form" name='add_class_form' action="." method="POST">
        {% csrf_token %}

        <input type="hidden" name="user" ref="20" value="{{form.user.value}}" />

        <input type='text' name='klass' ref="100" 
              class="label_if_blank limit_text grid_3 large_gray_text_box"
              title="e.g. 18.02" value="{{form.klass.value}}"/>

        <input type='text' name='instructor' ref="30"
              class="label_if_blank limit_text grid_3 large_gray_text_box"
              title="Instructor" value="{{form.instructor.value}}">

        <input type='text' name='recitation_leader' ref="100" 
              class="label_if_blank limit_text grid_3 large_gray_text_box"
              title="Recitation Leader" value="{{form.recitation_leader.value}}"/>
              
        <input type='text' name='experience' ref="100" 
              class="label_if_blank limit_text grid_3 large_gray_text_box"
              title="Level of comfort (in subject)" value="{{form.experience.value}}"/>
              
        <a href="javascript: $('#add_class_form').submit()" class="gray_button submit_button">Add Class</a>
        <input type='hidden' name="class-refresh" value="{{form.klass.value}}">
      </form>
    </div>
</div>

{% endblock %}
